# [会思考的AI心理咨询师（SoulChat-R1）](https://github.com/scutcyr/SoulChat-R1)

\[ [English](./README.md) | 中文 \]

## 最近更新

- 👏🏻  2025.09.04：欢迎大家关注我们的工作：[CATCH: A Novel Data Synthesis Framework for High Therapy Fidelity
and Memory-Driven Planning Chain of Thought in AI Counseling](https://arxiv.org/pdf/2412.13660) <!-- github链接待修改 --> 已经成功被 EMNLP 2025 Findings 接收！🎉

## 简介

自2024年12月发布 [SoulChat2.0](https://github.com/scutcyr/SoulChat2.0) 以来，我们持续探索真实心理咨询场景中的语言模式与干预机制，在提升AI心理咨询的治疗保真度与逻辑一致性方面取得重要进展。

尽管近年来基于大语言模型的心理咨询研究快速发展，如SMILE、CPsyCoun、Cactus、PsyDT等工作通过数据合成推动了该领域的进步，但这些方法普遍采用“一次性生成”的方式构建多轮对话数据。这种生成策略在合成数据时缺乏对各个疗法阶段的精细把控，难以确保合成数据的在各个疗法阶段与疗法对齐，导致合成数据的**治疗保真度**（therapy fidelity）较低。此外，现有合成数据大多**缺乏显式的思维链**（Chain-of-Thought），未能揭示咨询师每一轮回应背后的决策动机与推理过程。基于此类数据训练的模型往往只能模仿表面的对话模式，而无法深入理解并掌握底层的治疗逻辑。

这些局限性使得AI心理咨询模型在实际对话中容易出现“**治疗漂移**”（therapy drift）—— 即对话逐渐偏离预设的治疗轨迹，影响干预效果与专业可信度。为系统性解决上述问题，华南理工大学未来技术学院-广东省数字孪生人重点实验室在前期工作基础上，提出CATCH框架，致力于构建高保真、可解释的AI心理咨询数据与模型体系。

## 方法

**CATCH** 是一个创新的数据合成框架，其核心在于解决AI心理咨询中的两大关键挑战：**治疗保真度低**与**决策逻辑不透明**。为此，CATCH由两个相辅相成的组件构成：

1.  **渐进式对话合成 (Progressive Dialogue Synthesis, PDS)**：提升对话的**治疗保真度**。
2.  **记忆驱动的动态规划思维链 (Memory-driven Dynamic Planning Chain-of-Thought, MDP CoT)**：揭示每一轮回应背后的**决策动机**。

### （1）渐进式对话合成 (PDS)

为克服现有“一次性生成”方法导致的治疗流程混乱和保真度低的问题，CATCH提出了**渐进式对话合成 (PDS)** 策略。PDS严格遵循**单次会话治疗 (Single-Session Therapy, SST)** 的理论框架，将咨询过程分解为三个结构化阶段：**目标确认**、**工作**和**结束**。对话内容并非一次性生成，而是**分阶段、增量式**地合成，确保每一轮交互都精准对齐既定的治疗协议。

PDS的流程始于真实的来访者自述（self-report）。首先，通过大语言模型（LLM）从自述中提取并生成各阶段所需的核心疗法要素，形成一个结构化的**对话提纲**：

*   **咨询目标 (Goal)**：基于来访者自述，生成一个唯一、具体、可行、积极、可评估且聚焦于内在心理过程的目标。
*   **资源 (Resources)**：结合咨询目标，系统性地探索并生成资源，包括来访者的内在优势（如过往应对经验）和外部支持（如社会关系）。
*   **解决方案 (Solution)**：从生成的资源中识别出能够有效支持目标达成的“**正向资源**”，并将其转化为一个具体、可行、可由来访者独立执行的行动方案。

该提纲与从自述中提取的**大五人格特质**共同作为对话生成的指导。LLM依据提纲，按阶段顺序生成对话。后续阶段的对话严格建立在前一阶段输出的基础之上，最终拼接成一个逻辑连贯、结构完整、高保真度的多轮咨询对话。

#### SST 疗法三阶段详解

| 阶段 | 核心任务 | 关键步骤 |
| :--- | :--- | :--- |
| **目标确认阶段** | 建立信任关系，共同确认核心咨询目标。 | 1.  **建立同盟**：通过共情与无条件积极关注，建立安全的治疗关系。<br>2.  **聚焦核心**：引导来访者从众多困扰中，识别出最紧迫、最具代表性的问题。<br>3.  **确认目标**：双方共同协商，确认一个符合SST标准的、清晰的心理学目标。 |
| **工作阶段** | 探索资源，并将正向资源转化为具体解决方案。 | 1.  **探索资源**：系统性地发掘来访者的内部（如个人品质、成功经验）和外部资源（如社会支持）。<br>2.  **转化方案**：将识别出的“正向资源”通过行为预演等技术，转化为可执行的行动方案。<br>3.  **准备过渡**：当来访者表现出尝试行动的意愿时，为进入结束阶段做好准备。 |
| **结束阶段** | 总结反馈、强化信心，并布置后续行动。 | 1.  **反馈总结**：肯定来访者的努力与进步，强化其积极体验。<br>2.  **布置作业**：根据解决方案，布置具体的“家庭作业”或行动计划，以巩固咨询效果。<br>3.  **完成收尾**：确保咨询过程具有完整性和建设性，增强来访者面对未来的信心。 |

<p align="center">
    <img src="./figure/PDS _Pipeline.png" width=700px/>
</p>

### （2）记忆驱动的动态规划思维链 (MDP CoT)

为解决合成数据缺乏决策逻辑透明度的问题，CATCH引入了**记忆驱动的动态规划 (MDP)** 思维模式，并构建了**MDP-CoT**，以系统化地揭示每一轮回应背后的完整推理过程。

MDP模拟了专业咨询师进行**个案概念化 (case conceptualization)** 的认知过程，包含三个递进环节：

*   **记忆增强 (Memory Enhancement)**：回顾并整合历史对话，构建一个关于来访者背景、情绪状态和目标进展的持续更新的结构化摘要。
*   **全局规划 (Global Planning)**：评估当前进展，明确所处的治疗阶段，并规划后续步骤，确保短期对话服务于长期目标。
*   **策略推理 (Strategy Reasoning)**：综合记忆与规划信息，为当前轮次选择最优的回应策略，包括具体的治疗技术和表达方式。

基于此，我们设计了一个**协作式多智能体框架**来生成高质量的MDP-CoT：

*   **记忆捕获智能体 (Memory Capture Agent)**：分析对话历史，生成关于来访者个人情况、资源状态和咨询目标的“当前状态摘要”。
*   **全局规划智能体 (Global Plan Agent)**：判断当前所处的精确阶段，并规划下一步的行动方向（维持、步骤转换或阶段过渡）。
*   **策略推理智能体 (Strategy Reasoning Agent)**：分析来访者最新陈述，推理出最合适的回应策略（技术、语气、长度）。
*   **检查智能体 (Checking Agent)**：对每个生成步骤进行严格验证（内容一致性、逻辑连贯性、与最终回应的对齐），发现偏差则触发重生成，确保质量。
*   **融合智能体 (Fusion Agent)**：将经过验证的各部分输出，整合成一段流畅、自然、以第一人称视角呈现的内心独白，形成最终的**MDP-CoT**。

<p align="center">
    <img src="./figure/MDP_CoT_Synthesis_Pipeline.png" width=800px/>
</p>

## 实验

### PDS 方法有效性评估

为验证 **渐进式对话合成**（Progressive Dialogue Synthesis, PDS）在提升治疗保真度方面的优势，我们将其与 **一次性生成方法**（One-time Generation）进行了对比。基于相同的 LLM 与 SST 治疗知识，我们为 60 个咨询案例分别生成两组对话，并邀请专家进行双盲评估。

评估涵盖以下六个维度如下表所示：

| 维度 | 缩写 | 评估重点 |
|------|------|----------|
| **咨询师引导连贯性** | CCG | 是否遵循逻辑递进的干预路径，各阶段衔接自然、目标一致 |
| **目标识别阶段表现** | GIS | 是否建立信任关系，并协同来访者明确符合 SST 标准的具体、可衡量心理目标 |
| **工作阶段表现** | WS | 是否系统探索内外部资源，并有效引导转化为可行行动方案 |
| **结束阶段表现** | ES | 是否恰当总结、提供正向反馈，并布置与解决方案一致的后续任务 |
| **对话流畅性** | DF | 语言是否自然连贯，无重复、跳跃或语义断裂 |
| **话题相关性** | TR | 内容是否始终聚焦核心困扰，避免无关偏离 |

<p align="center">
    <img src="./figure/PDS_Evaluation_Result.png" width="500" alt="PDS vs One-time Generation 专家评估结果">
</p>

**结果**：在所有治疗阶段（GIS, WS, ES）及引导连贯性（CCG）上，PDS 生成的对话均显著优于一次性生成方法。例如，PDS 在 GIS 阶段获得 **78%** 的专家偏好，在 WS 阶段高达 **95%**。此外，PDS 在 DF 与 TR 上也表现出更优的稳定性，表明其不仅提升了治疗结构的完整性，也增强了语义一致性与话题聚焦度。

---

### 模型整体性能评估

我们在 **Qwen3-8B** 和 **Qwen3-14B** 基座模型上，基于 CATCH 框架生成的高质量多轮对话数据（含显式 MDP 思维链）进行监督微调，得到 **CATCH-8B** 和 **CATCH-14B** 模型。我们将其与 GPT-4o、DeepSeek-V3、DeepSeek-R1 等先进模型进行对比，全面评估其在单次会话疗法（SST）中的表现。

#### 评估方法

评估采用 **对话模拟**（dialogue simulation）协议，遵循 [COUNSELINGEVAL](https://aclanthology.org/2024.findings-emnlp.832/) 范式：

1. **测试集**：使用 COUNSELINGEVAL 的标准化测试集，包含 150 份来访者档案，预设 **积极**、**中立**、**消极** 三种态度类型，以评估模型鲁棒性。
2. **对话模拟**：采用 **双模型模拟**（dual-model simulation）：
   - **来访者**（Client）：由 GPT-4o-mini 扮演，基于档案生成自然、连贯且符合态度类型的回应。
   - **咨询师**（Counselor）：由待评估模型担任，所有模型均接入相同 SST 知识，确保公平。
3. **评估者**：使用 **GPT-4o** 作为自动化评估者（AI evaluator），对 450 个完整对话（150 案例 × 3 态度）进行打分。
4. **可靠性验证**：随机选取 60 个样本，由人类专家使用相同量表评分。结果显示 GPT-4o 评分与人类专家呈显著正相关

评估在 **SST 特定技能** 与 **通用咨询能力** 两个维度展开：

**1. SST 特定技能评估**

-   **问题聚焦**（Solution Focus, SF）：衡量咨询师是否能够引导来访者从问题描述转向解决方案构建、希望表达与积极经验挖掘，反映模型在认知重构与正向引导方面的能力。
-   **资源激活**（Resource Activation, RA）：评估咨询师识别并激活来访者内在（如情绪调节能力、过往应对经验）与外部资源（如社会支持）的有效性，并将其转化为可行策略的程度。
-   **目标导向**（Goal Orientation, GO）：考察咨询师协助来访者设定清晰、可衡量、可执行的心理目标，并在对话中持续追踪进展、调整计划的能力，体现干预的结构化水平与逻辑连贯性。

**2. 通用咨询能力评估**

-   **理解力**（Understanding）：评估咨询师准确理解来访者陈述内容、情感状态和核心困扰的能力。
-   **人际有效性**（Interpersonal Effectiveness）：衡量咨询师在建立信任、表达共情、维持积极互动方面的表现。
-   **协作性**（Collaboration）：考察咨询师是否能与来访者建立合作关系，共同探讨问题和解决方案，而非单方面指导。

<p align="center">
    <img src="./figure/Experiment_Result.png" width="900" alt="CATCH 模型 vs 基线模型 性能对比">
</p>

**结果**：
1. **SST 核心技能显著提升**  
   CATCH 模型在 **资源激活**（RA）与 **目标导向**（GO）上表现突出：
   - CATCH-8B：RA ↑ **32.9%** (3.98 → 5.29)，GO ↑ **50.9%** (2.85 → 4.30)
   - CATCH-14B：RA ↑ **31.4%** (4.08 → 5.36)，GO ↑ **45.0%** (3.02 → 4.38)
   - 在所有 SST 指标上，CATCH 均优于 DeepSeek-R1 与 GPT-4o，表明 **PDS + MDP-CoT** 有效增强了模型对治疗逻辑的理解与执行能力。

2. **问题聚焦保持领先**  
   CATCH 在 SF 上同样优于基线（CATCH-8B: 4.91 > Qwen3-8B: 4.47），虽提升幅度较小，但结合其在 RA 与 GO 的巨大优势，表明其核心竞争力在于**深度资源挖掘**与**长期目标一致性**。

3. **通用能力保持竞争力**  
   在理解力、人际有效性与协作性上，CATCH 表现稳健，与 GPT-4o、DeepSeek-R1 处于同一水平（如 CATCH-14B 协作性达 4.99），表明其在增强专业性的同时，未牺牲对话的自然性与共情质量。

---

### 消融实验分析

为解耦 **PDS** 与 **MDP-CoT** 的贡献，我们进行了消融实验，对比以下设置：
- `w/o PDS and MDP`：基线模型（标准一次性生成数据）
- `w/o MDP`：使用 PDS 数据，但无 MDP 思维链
- `CATCH-8B/14B`：完整 CATCH 框架数据（PDS + MDP-CoT）

<p align="center">
    <img src="./figure/Ablation_Result.png" width="900" alt="消融实验结果">
</p>

**结果**：
1. **PDS 的核心作用**  
仅引入 PDS 即可带来显著提升（如 CATCH-8B 的 RA 从 3.98 → 5.09，GO 从 2.85 → 4.16）。这证明 **结构化、分阶段的数据生成** 是提升治疗保真度的关键，为模型提供了更可靠的学习信号。

2. **MDP-CoT 的关键增益**  
在 PDS 基础上引入 MDP-CoT 进一步提升了性能（如 CATCH-8B 的 RA 从 5.09 → 5.29）。这验证了 **显式思维链** 对于模型掌握深层治疗逻辑至关重要——它使模型不仅能模仿“说什么”，更能理解“**为什么这么说**”。

3. **鲁棒性分析**  
基线模型在面对 **消极态度** 来访者时性能显著下降，暴露其易发生“**治疗漂移**”（therapy drift）的脆弱性。而 CATCH 模型在所有态度下均保持稳定高性能，尤其在消极情境中优势明显，表明其框架能有效增强模型在复杂真实场景中的**稳健性与抗干扰能力**。

<p align="center">
    <img src="./figure/Attitude_Analysis.png" width="600" alt="不同来访者态度下的模型性能">
</p>

## 数据

我们很高兴地宣布，通过 **CATCH** 框架构建的高质量AI心理咨询数据集现已开源！该数据集不仅包含遵循标准疗法流程的多轮结构化对话，更创新性地为每一轮咨询师回应提供了显式的决策推理链（MDP CoT）。我们的目标是将专业咨询师的“隐性知识”转化为可学习的“显性知识”，为AI心理咨询领域的研究者提供富含深层治疗逻辑的宝贵训练数据。

### 数据集概览

本数据集旨在解决现有合成数据疗法保真度低、缺乏决策透明度的问题。其核心由两部分构成，共同模拟了专业咨询的全过程：

1.  **`catch_dialogue.json`**: **结构化咨询对话**。
    *   严格遵循**单次会话疗法 (Single-Session Therapy, SST)** 的三阶段流程：**目标确认**、**工作**与**结束**。
    *   每条咨询师回复均标注了其所属的**咨询阶段**。

2.  **`catch_mdpcot.json`**: **显式思维链 (MDP CoT)**。
    *   揭示了咨询师在生成每一轮回应前的完整思考过程，包含**记忆增强**、**全局规划**和**策略推理**三个关键环节。
    *   以`<think>...</think>`标签清晰地将“思考”与“回应”分隔开来。

### 数据格式

#### 1. 结构化咨询对话 (`catch_dialogue.json`)

```json
{
    "dialogue_id": "100596267",
    "consultation_target": "帮助来访者尝试识别并表达内心真实的情感需求，增强对亲密关系中安全感和信任的体验。",
    "conversation": [
        {
            "role": "client",
            "content": "我最近状态挺奇怪的，有点想找人聊一聊，但又不知道从哪里开始。"
        },
        {
            "role": "counselor",
            "content": "嗯，那没关系，你愿意从什么让你最近觉得自己“状态奇怪”这一部分入手聊聊吗？我在这里倾听，不着急。",
            "stage": "target"
        },
        // ... 更多对话轮次
        {
            "role": "counselor",
            "content": "今天我们聊了很多，你讲到一直被一些过去的经历影响...相信你能做到，我也会一直支持你！",
            "stage": "ending"
        }
    ]
}
```

**字段说明：**

| 字段名 | 类型 | 描述 |
| :--- | :--- | :--- |
| `dialogue_id` | string | 对话的唯一标识符。 |
| `consultation_target` | string | 本次咨询的核心目标。由PDS策略从来访者自述中提取，符合SST的“具体、可行、积极”等标准。 |
| `conversation` | list[dict] | 按时间顺序排列的对话轮次列表。 |
| `role` | string | 发言者角色：`"client"` 或 `"counselor"`。 |
| `content` | string | 发言的具体内容。 |
| `stage` | string | **仅咨询师发言包含此字段**。标注当前轮次所处的咨询阶段：`"target"`（目标确认）、`"working"`（工作）或 `"ending"`（结束）。 |

#### 2. 显式思维链 (`catch_mdpcot.json`)

该文件中的每条数据对应`catch_dialogue.json`中的一轮咨询师回应。`output`字段包含了以`<think>...</think>`包裹的MDP CoT。

**目标确认阶段示例**

```json
{
    "instruction": "其实这种感觉有点久了，但每次冒出来，我都不太愿意去想。可能是觉得没必要吧，有时候甚至觉得在浪费时间。",
    "system": "# 【一次单元咨询疗法（Single-Session Therapy，SST）指南手册...",
    "input": "",
    "output": "<think>\n我先看看咨询进展。来访者近期状态奇怪，感觉日子空虚，做什么都提不起劲，而且这种空虚感存在较久，但他不愿去想。目前，我暂未探索到其内部资源和外部资源，本次咨询目标也未明确。\n\n基于这些咨询进展，我来分析下咨询阶段。根据提供的历史对话和我的思考内容，来访者目前仍未明确咨询目标，当前还处于目标确认阶段。因为目前还未完成目标确认阶段的步骤，所以不应转换到其他阶段。下一步，我应保持在目标确认阶段，继续与来访者沟通交流，建立更紧密的关系，以此推动明确咨询目标。\n\n结合前面的咨询进展和阶段分析，再看看当前轮回复。来访者说这种感觉有点久了，但每次冒出来，他都不太愿意去想，还觉得没必要，甚至觉得是在浪费时间。这体现出来访者对面对该问题的抗拒。在目标确认阶段，我需要处理阻抗，通过接纳阻抗的策略，引导来访者表达抗拒情绪，进一步了解其内心想法，从而更好地明确咨询目标。所以我选择接纳阻抗作为回复策略，语气上要保持温和理解，运用共情的SST疗法技巧，用询问的表达方式简洁明了地进行回应。 \n</think>\n听起来你在面对这些感受的时候，可能会有点抗拒，像是不想让它占据你太多的精力或时间。这种抗拒会让你觉得轻松一些，还是会让内心更复杂？",
    "history": [
        [
            "我最近状态挺奇怪的，有点想找人聊一聊，但又不知道从哪里开始。",
            "嗯，那没关系，你愿意从什么让你最近觉得自己“状态奇怪”这一部分入手聊聊吗？我在这里倾听，不着急。"
        ],
        [
            "可能是我总觉得日子过得有点空虚吧，好像做什么都提不起劲，也不知道自己怎么了。",
            "听起来内心有些困惑，像是对现在的生活少了动力或方向。如果可以的话，能说说这个“空虚”的感受对你来说是怎样的吗？"
        ]
    ]
}
```

在目标确认阶段，面对来访者对情绪的回避（“觉得没必要”“浪费时间”），咨询师未强行推进，而是精准识别其心理阻抗，并以开放式提问探查回避背后的情感代价（“会让内心更复杂吗？”），推动对话从问题描述向深层需求探索过渡。

**工作阶段示例**

```json
{
    "instruction": "有的，比如说读一些关于自我成长的书籍，还试过冥想和瑜伽什么的，但效果不太持久...",
    "system": "# 【一次单元咨询疗法（Single-Session Therapy，SST）指南手册】...",
    "input": "",
    "output": "<think>\n我先梳理一下咨询进展。来访者小时候经历过家暴，这让他变得更封闭，在亲密关系中不敢完全信任对方，也不知如何打开自己。他尝试过读自我成长的书籍、冥想和瑜伽这些内部资源，但效果不持久，且积极性不高，外部资源目前也暂未探索得到。本次咨询目标是帮助来访者尝试识别并表达内心真实的情感需求，增强对亲密关系中安全感和信任的体验。\n\n基于以上咨询进展，来分析一下咨询阶段。当前对话已进入工作阶段，在寻找积极资源步骤中，内部资源方面来访者尝试的读自我成长书籍、冥想和瑜伽效果不佳，外部资源也没找到。虽然已经明确本次咨询目标，但还没挖掘到对实现该目标有积极作用的资源。所以，下一步我应该继续挖掘积极资源，询问来访者之前尝试的方式在某些方面的帮助，看能不能进一步激活内部资源。\n\n再结合前面的情况，看看当前轮回复。来访者提到之前尝试的方法效果不持久，还感觉没办法真正触及到内心深处。现在处于工作阶段的寻找积极资源步骤，为了进一步激活内部资源，我得从他尝试过的方法入手，引导他思考这些方法即便效果不持久，可能仍存在积极影响，以此挖掘潜在积极资源。 \n</think>\n你会特别提到冥想、瑜伽和阅读书籍，说明这些方式某种程度上吸引了你。它们有没有哪一方面帮助到你呢？比如你觉得稍微舒缓了情绪或者更清楚自己的某些触动？",
    "history": [
        [
            "我最近状态挺奇怪的，有点想找人聊一聊，但又不知道从哪里开始。",
            "嗯，那没关系，你愿意从什么让你最近觉得自己“状态奇怪”这一部分入手聊聊吗？我在这里倾听，不着急。"
        ],
        [
            "可能是我总觉得日子过得有点空虚吧，好像做什么都提不起劲，也不知道自己怎么了。",
            "听起来内心有些困惑，像是对现在的生活少了动力或方向。如果可以的话，能说说这个“空虚”的感受对你来说是怎样的吗？"
        ],
        [
            "其实这种感觉有点久了，但每次冒出来，我都不太愿意去想。可能是觉得没必要吧，有时候甚至觉得在浪费时间。",
            "听起来你在面对这些感受的时候，可能会有点抗拒，像是不想让它占据你太多的精力或时间。这种抗拒会让你觉得轻松一些，还是会让内心更复杂？"
        ],
        [
            "会让自己更复杂吧，好像这些情绪不会真的消失，它们还是会突然跳出来，提醒我它们的存在。尤其是在我觉得状态不错，或者目标清晰的时候。",
            "原来如此，那种压下的情绪好像会趁你放松警惕时冒出来，打乱你的节奏，这听上去确实让人不舒服。你觉得这些情绪是和哪些经历或事情有关联呢？"
        ],
        [
            "过去一些不太好的事吧，和家庭有关。小时候经历过家暴，我从那时候变得更封闭了，可能它对我现在的性格、生活都有些影响。",
            "那一定是很难忘的经历，对现在的生活也留下了印记。听起来这些过往对你来说可能还影响到了你的一些情感和人际关系，是这样吗？"
        ],
        [
            "是的，尤其是在和别人的关系中吧。好像越是亲密的关系，我越不敢完全信任对方，也不知道怎样打开自己。",
            "嗯，原来亲密关系对你来说带着一种挑战，像是既渴望又担心的感受，不知道该如何去平衡这种矛盾是吗？"
        ],
        [
            "是的，我很羡慕那些能随意表达情感、找到快乐的人。可是我不知道自己该怎么去迈出这一步，好像总是被一种无形的东西卡住了。",
            "那种自由表达和快乐的状态听起来确实让人向往，而你感到被卡住时，可能是因为内心的某些需求遇到了难题。我们可以试着一起探索一下，这种“卡住”的背后，它想让你注意到什么，或者希望抓住什么？"
        ],
        [
            "我觉得我可能真的需要去看看自己内心真正需要的是什么，可能是找到更真实的自我吧，也想知道该怎么开始信任别人。",
            "嗯，你提到之前尝试过去看看内心的真实需求，那在过去类似这样的状态里，你有试过哪些方法让自己感觉好一些吗？比如让自己更接近内心的真实或者更放松。"
        ]
    ]
}
```

模型首先整合记忆，识别出“家暴经历→封闭性格→信任障碍”的核心脉络；继而进行全局规划，判断当前处于“工作阶段”且尚未激活有效资源；最后执行策略推理，选择从来访者提及的冥想、阅读等“低效但存在”的尝试入手，挖掘潜在积极体验，以推进资源激活。

**结束阶段示例**

```json
{
    "instruction": "我愿意试试，谢谢你帮助我理清了这些思路！",
    "system": "# 【一次单元咨询疗法（Single-Session Therapy，SST）指南手册】...",
    "input": "",
    "output": "<think>\n我先回顾一下这位来访者的咨询进展。来访者小时候经历过家暴，性格变得封闭，在亲密关系中既渴望又担心，难以完全信任对方，不知如何打开自己，还感觉生活空虚，做事提不起劲。不过，来访者也有一些内部资源，比如尝试过阅读自我成长书籍、冥想、瑜伽，虽效果不持久但能带来短暂平静；还有写日记的习惯，虽未坚持，但现在打算以简单记录情绪、触发事件及内心需求的方式重新开始写日记，积极性较高。外部资源方面，来访者有个关系不错的朋友，会讨论学习或工作上的事情，虽不确定能否分享个人内容，但愿意慢慢尝试与之沟通，积极性也较高。本次咨询目标是帮助来访者尝试识别并表达内心真实的情感需求，增强对亲密关系中安全感和信任的体验。\n\n基于这些咨询进展，我来分析一下咨询阶段。来访者在本次咨询中已经和我探讨出了帮助自己识别并表达内心真实情感需求，增强亲密关系安全感和信任体验的目标。在工作阶段，也充分挖掘出了内部资源（重新开始以简单方式写日记）和外部资源（愿意尝试和朋友沟通），而且来访者对写日记及与朋友沟通都表现出了较高的积极性，在对话最后还表示愿意尝试所讨论的方案，也对我表达了感谢，这已经满足了工作阶段向结束阶段推进的条件。所以，下一步我应该进入结束阶段，对来访者进行反馈总结和鼓励等操作。\n\n再看看当前轮回复的情况。来访者当前轮发言说“我愿意试试，谢谢你帮助我理清了这些思路！”这表明来访者已表示愿意尝试所讨论的方案，满足从工作阶段向结束阶段推进的条件。在结束阶段，我应按照SST手册要求，对来访者进行反馈总结和鼓励。我要先通过回顾来访者过去经历及面对亲密关系的状态，肯定其探索情绪与尝试改变的行为，给予赞美。接着布置家庭作业，明确提出让来访者记录情绪等具体行动。最后再次鼓励，表达对其的支持，增强来访者信心。整体语气要积极、肯定且充满鼓励，运用反馈总结、鼓励赞美等SST疗法技巧，表达方式要详细，符合结束阶段适当延长回复长度的要求。 \n</think>\n今天我们聊了很多，你讲到一直被一些过去的经历影响，也让你在面对亲密关系时有些犹豫和不安，但同时我们也看到，你愿意去探索自己的情绪，勇敢地去尝试改变，这本身就是一种非常难得的力量。接下来，你可以每天花五分钟简单写下当天的情绪、触发的事情和内心的小需求，试着和自己对话，帮自己一点点更清楚地了解真实的感受。等你觉得舒适的时候，也可以尝试从一些轻松的小话题入手，和身边值得信任的人慢慢交流。你很有耐心，也在向前迈进，这些努力一定会帮助你找到方向。相信你能做到，我也会一直支持你！",
    "history": [
        // ... 对话历史
    ]
}
```

该案例展示了 CATCH 框架在结束阶段对治疗逻辑的完整把握。模型通过 MDP-CoT 显式回溯咨询全程：准确梳理来访者的核心困扰（童年创伤、信任困难）、已识别的内外部资源（写日记、朋友支持）及咨询目标，并基于此判断对话已满足向结束阶段过渡的条件。

**字段说明：**

| 字段名 | 类型 | 描述 |
| :--- | :--- | :--- |
| `instruction` | string | **输入**。来访者当前轮次的发言，是生成思维链和回应的直接依据。 |
| `system` | string | **系统提示**。提供SST疗法知识背景，确保模型推理的专业性和一致性。 |
| `output` | string | **核心输出**。包含`<think>...</think>`标签内的**MDP CoT**（咨询师的完整思考过程）以及最终生成的**咨询师回应**。 |
| `history` | list[list[string]] | **上下文**。按 `[ [来访者发言, 咨询师回复], ... ]` 格式组织的对话历史，为当前轮次的推理提供必要的上下文信息。 |
